jQuery(document).ready((function($){var paneClass;$(".panel-separator").remove(),paneClass=$("body").hasClass("logged-in")?".panels-ipe-portlet-wrapper":".panel-pane";var pane=$(".body").find(paneClass);pane.each((function(){if($(this).has(".h2-section-header").length){var sectionId=$(this).find(".h2-section-header").attr("id");$($(this).nextUntil(pane.has(".h2-section-header")).addBack()).wrapAll('<section class="page-section" id="'+sectionId+'"></section>')}})),$(".body .h2-section-header").removeAttr("id"),$(".body section").each((function(i,v){$(this).find("section:not(:eq(0))").unwrap(),i!=$(".body section").length-1&&$(this).append("<hr>")}));var sideNav=$(".side-navigation"),navPlaceholder=document.createElement("div");navPlaceholder.setAttribute("id","nav-placeholder"),navPlaceholder.setAttribute("aria-hidden","true");var navLinksArr=[],rfi;if($(".gradRequestInfoForm")[0]&&(rfi=$(".gradRequestInfoForm").parents(paneClass)),$("#request-information")[0])var rfi=$("#request-information").parents(paneClass);var rfiPlaceholder=document.createElement("div");rfiPlaceholder.setAttribute("id","rfi-placeholder"),rfiPlaceholder.setAttribute("aria-hidden","true"),$.fn.getNavLinkAttrs=function(){var navLinks;return $(".navbar-nav a").each((function(){var linkHash=$(this).attr("href"),leftPos=$(this).offset().left;navLinksArr.push({hash:linkHash,left:leftPos})})),this};var mobile=window.matchMedia("only screen and (max-width: 40em)").matches;mobile?($("#cta-buttons").wrapAll('<div id="mobile-navs"></div>'),sideNav.addClass("mobile"),sideNav.addClass("sticky").promise().done((function(){sideNav.getNavLinkAttrs().promise().done((function(){sideNav.removeClass("sticky").promise().done((function(){sideNav.detach().prependTo("#mobile-navs").promise().done((function(){$("#cta-buttons").css("display","block")}))}))}))}))):sideNav.addClass("non-mobile");var sections=$(".page-section"),rfiHeight,sidenavHeight,hheight,sidebar=$(".sidebar"),sidebarWidth,footer=$("#bottom-cta"),bodyDiv=$(".body"),navbarWidth,navbarNav=$(".navbar-nav"),isNavPlaceholder=!1,isRfiPlaceholder=!1,rfiIsAttchBody=!1,rfiIsAttchSidebar=!0,topOfFooter;let last_known_scroll_position=0,ticking=!1;function createStaticCalcs(){footerOffsetTop=footer.offset().top,topOfFooter=footerOffsetTop-footer.outerHeight()-50,sidebarWidth=sidebar.width(),rfiHeight=$(rfi).height(),bodyColHeight=$(".columns .body").innerHeight(),sidenavHeight=$(".side-navigation").height(),hheight=$("header.l-header").outerHeight(),navbarWidth=navbarNav.width(),sections.each((function(){this.top=$(this).offset().top-hheight,this.bottom=$(this).outerHeight(!0)+this.top}))}function desktopScroll(scroll_pos){$("body").css("margin-top","0px"),$(".side-navigation.unsticky").is(":in-viewport")||(sideNav.removeClass("unsticky").addClass("sticky").addClass("animated").addClass("slideInDown").css("top","0"),!1===isNavPlaceholder&&(sidebar.prepend(navPlaceholder),$("#nav-placeholder").css("height",sidenavHeight),isNavPlaceholder=!0)),$("#nav-placeholder").is(":in-viewport")&&(sideNav.removeClass("sticky").addClass("unsticky").removeClass("slideInDown"),$("#nav-placeholder").remove(),isNavPlaceholder=!1),sideNav.hasClass("sticky")&&sections.each((function(){if(scroll_pos>=this.top&&scroll_pos<=this.bottom){var activeElement=$('.side-navigation li a[href~="#'+this.id+'"]');activeElement.hasClass("active")||activeElement.addClass("active")}else $('.side-navigation li a[href~="#'+this.id+'"]').not().removeClass("active")})),$(".sidebar").is(":in-viewport")?(rfi.removeClass("fadeIn faded bottom-stick-rfi floating-rfi").addClass("default-rfi").css("left",""),$("#rfi-placeholder").replaceWith(rfi),isRfiPlaceholder=!1):window.scrollY>=topOfFooter?!0===rfiIsAttchSidebar&&(repositionRFIForm(),rfiIsAttchBody=!0,rfiIsAttchSidebar=!1):(!0===rfiIsAttchBody&&(repositionRFIForm(),rfiIsAttchBody=!1,rfiIsAttchSidebar=!0),rfi.removeClass("bottom-stick-rfi default-rfi").addClass("floating-rfi").css({width:sidebarWidth,left:""}),rfi.hasClass("faded")||rfi.addClass("fadeIn"),!1===isRfiPlaceholder&&($(rfiPlaceholder).insertAfter(sideNav.parents(paneClass)),$("#rfi-placeholder").css("height",rfiHeight),isRfiPlaceholder=!0)),$("#actionModal").is(":in-viewport")||$("#actionModal").foundation("reveal","close")}function repositionRFIForm(){!0===rfiIsAttchSidebar&&rfi.removeClass("fadeIn floating-rfi default-rfi").addClass("bottom-stick-rfi faded").detach().appendTo(".body").css("left",-(bodyDiv.offset().left-sidebar.offset().left-15)),!0===rfiIsAttchBody&&(rfi.detach().appendTo(".sidebar"),rfi.removeClass("bottom-stick-rfi default-rfi").addClass("floating-rfi").css({width:sidebarWidth,left:""}))}function mobileScroll(scroll_pos){scroll_pos>=hheight?sideNav.addClass("sticky").removeClass("unsticky").hideMobileAffordance():sideNav.removeClass("sticky").addClass("unsticky"),sideNav.hasClass("sticky")&&sections.each((function(){if(scroll_pos>=this.top&&scroll_pos<=this.bottom){var activeElement=$('.side-navigation li a[href~="#'+this.id+'"]');if(!activeElement.hasClass("active")){activeElement.addClass("active");var hash="#"+this.id;let leftOffset=navLinksArr.find(ele=>ele.hash===hash).left,linkWidth=$(activeElement).width();linkWidth+leftOffset>navbarWidth?navbarNav.animate({scrollLeft:"+="+leftOffset+linkWidth}):navbarNav.animate({scrollLeft:"-="+leftOffset+linkWidth})}}else $('.side-navigation li a[href~="#'+this.id+'"]').not().removeClass("active")}))}window.addEventListener("load",event=>{createStaticCalcs()}),window.addEventListener("resize",event=>{createStaticCalcs()}),$("dd.accordion-navigation a").on("click",(function(){"false"==$(this).attr("aria-expanded")&&setTimeout((function(){createStaticCalcs()}),100)})),mobile||$("#faq dd.accordion-navigation a").on("click",(function(){!0===rfiIsAttchSidebar&&(repositionRFIForm(),rfiIsAttchBody=!0,rfiIsAttchSidebar=!1),!0===rfiIsAttchBody&&(repositionRFIForm(),rfiIsAttchBody=!1,rfiIsAttchSidebar=!0)})),$.fn.hideMobileAffordance=function(){return $(".m-affordance").fadeOut(5e3),this},mobile||($(".m-affordance").css("display","none"),window.addEventListener("scroll",(function(){last_known_scroll_position=window.scrollY,ticking||(window.requestAnimationFrame((function(){desktopScroll(last_known_scroll_position),ticking=!1})),ticking=!0)}))),mobile&&window.addEventListener("scroll",(function(){last_known_scroll_position=window.scrollY,ticking||(window.requestAnimationFrame((function(){mobileScroll(last_known_scroll_position),ticking=!1})),ticking=!0)})),$(".side-navigation a").not(".apply-now").on("click",(function(e){e.preventDefault();var activeSection=$(this).attr("href");activeSection=$(activeSection),sideNav.hasClass("sticky")?$("html, body").animate({scrollTop:activeSection.offset().top-80},750):(sideNav.hasClass("mobile")&&sideNav.hasClass("unsticky"),$("html, body").animate({scrollTop:activeSection.offset().top-60},750))})),$(":header").each((function(){$(this).html($(this).html().replace(/(Ph.D.)/g,'<span style="text-transform: capitalize;">$1</span>'))}));var infoForum=$("#info-forum").parents(paneClass),applyModal=$("#apply-modal");function populateModal(triggerSrc,content,dialogOpen){if(!1===dialogOpen)return dialogOpen=!0,content===rfi&&$(rfi).removeClass("floating-rfi bottom-stick-rfi").addClass("default-rfi").css({left:""}),content===applyModal&&($(".reveal-modal").removeClass("tiny"),$(applyModal).css("display","block")),$("#actionModalInner").html(content).prepend('<a aria-label="Close" class="close-reveal-modal" role="button" tabindex="0">Ã—</a>'),void $("#actionModal").attr("triggerSrc",triggerSrc).foundation("reveal","open").focus()}if(!mobile){var modalBody='<div class="reveal-modal tiny" data-reveal="" id="actionModal" role="dialog" aria-modal="true" tabindex="-1" style="display: none;"><div id="actionModalInner"></div></div>';$("body").append(modalBody);var dialogOpen=!1;$(".rfi-button").click((function(e){e.preventDefault(),populateModal(this.id,rfi,dialogOpen),dialogOpen=!0})),$(".webinar-button").click((function(e){e.preventDefault(),populateModal(this.id,infoForum,dialogOpen),dialogOpen=!0})),$(".apply").click((function(e){applyModal.length>0&&(e.preventDefault(),populateModal(this.id,applyModal,dialogOpen),dialogOpen=!0)})),$("body").on("keypress",'[role="button"]',(function(e){13!==e.which&&13!==e.keyCode&&32!==e.which&&32!==e.keycode&&"Enter"!==e.key&&"Space"!==e.code||$(this).click()})),$(document).on("opened.fndtn.","[data-reveal]",(function(){$("#actionModalInner").has("input").length>0?$("#actionModalInner input").first().focus():$("#actionModalInner h2").attr("tabindex","0").focus()})),$(document).on("close.fndtn.","[data-reveal]",(function(){var content=$("#actionModalInner").children().eq(1);content[0]==rfi[0]?$(content).detach().insertAfter($(".side-navigation").parents(paneClass)):content[0]==applyModal[0]?($(content).detach().appendTo($(".footer-pane")).css("display","none"),$(".reveal-modal").addClass("tiny")):($("#actionModalInner h2").attr("tabindex",""),$(content).detach().appendTo($(".sidebar"))),$("#actionModalInner").html(""),dialogOpen=!1})),$(document).on("closed.fndtn.","[data-reveal]",(function(){var triggerSrc="#"+$("#actionModal").attr("triggerSrc");$(triggerSrc).focus(),$("#actionModal").attr("triggerSrc",""),dialogOpen=!1})),document.addEventListener("focus",(function(event){var dialog=document.getElementById("actionModal");dialogOpen&&!dialog.contains(event.target)&&(event.stopPropagation(),dialog.focus())}),!0)}}));